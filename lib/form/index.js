!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("classnames")):"function"==typeof define&&define.amd?define(["react","classnames"],t):"object"==typeof exports?exports.form=t(require("react"),require("classnames")):(e["kingdee-ui-test"]=e["kingdee-ui-test"]||{},e["kingdee-ui-test"].form=t(e.react,e.classnames))}(window,function(e,t){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=12)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t,n){e.exports=n(17)()},,,,,,,,,,function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(2),i=n.n(a);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=function(e){return function(t){var n,r,a,y,m;return r=n=function(n){function r(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),n=this,(t=!(o=l(r).call(this,e))||"object"!==c(o)&&"function"!=typeof o?f(n):o).state={form:{defineField:function(){return function(){return null}},submitForm:function(){return null}},count:0},t.setForm=t.setForm.bind(f(t)),t}var a,i,y;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(r,o.a.Component),a=r,(i=[{key:"getChildContext",value:function(){return{setForm:this.setForm,name:e&&e.name?e.name:"kingdee-form"}}},{key:"setForm",value:function(e){this.setState({form:e})}},{key:"render",value:function(){return o.a.createElement(t,u({},this.props,{form:this.state.form}))}}])&&s(a.prototype,i),y&&s(a,y),r}(),a=n,y="childContextTypes",m={setForm:i.a.func,name:i.a.string},y in a?Object.defineProperty(a,y,{value:m,enumerable:!0,configurable:!0,writable:!0}):a[y]=m,r}},m=n(1),b=n.n(m);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j=function(e){return e&&e.props&&e.props.config&&e.props.config.rules&&e.props.config.rules.some(function(e){return e.require})},S="error",_=function(e,t){return t.every(function(t){return t.require&&!e.trim()?(S=t.message?t.message:"error",!1):!(t.regExp&&!new regExp(t.regExp).test(e))||(S=t.message?t.message:"error",!1)})},w=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=g(t).call(this,e),n=!o||"object"!==d(o)&&"function"!=typeof o?v(r):o,k(v(n),"getCheck",function(e){var t=n.props.children;t.props.config&&t.props.config.rules&&t.props.config.rules.length>0&&(_(e,t.props.config.rules)?n.state.message&&n.setState({message:""}):n.setState({message:S}))}),k(v(n),"handleChange",function(e,t){var r;switch(t){case"checkbox":r=e.target.checked;break;case"select":r=e.value;break;default:r=e.target.value}console.log(r),n.state.first&&n.setState({first:!1}),n.handleUpdata(r),n.setState({value:r})}),n.state={value:"",message:"",first:!0},n.handleChange=n.handleChange.bind(v(n)),n.getCheck=n.getCheck.bind(v(n)),n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(t,o.a.Component),n=t,(a=[{key:"componentDidMount",value:function(){var e=this;(0,this.context.updateStatus)(function(t){var n=e.props.children,r=n&&n.props&&n.props.key;r&&(t.isValue&&void 0!==t[r]&&(e.setState({value:t[r],first:!1}),e.handleUpdata(t[r])),t.isMsg&&void 0!==t[r]&&e.setState({message:t[r],first:!1}))})}},{key:"handleUpdata",value:function(e){var t=this.props.children;this.getCheck(e),t.props.onChange(e,t.props.key)}},{key:"render",value:function(){var e=this.props,t=e.label,n=e.style,a=e.labelStyle,i=e.vertical,c=e.children,u=e.inputStyle,s=this.state,l=s.message,f=s.value,p=s.first,y=c&&c.props&&void 0!==c.props.checked?c.props.checked:"",m=c&&c.props&&void 0!==c.props.checked?c.props.defaultValue:"",d=b()({"kingdee-form-item":!0,"kingdee-form-item__vertical":!!i}),h=b()({"kingdee-form-item-label":!0,"kingdee-form-item-label__require":!!j(c)}),g=b()({"kingdee-form-item-message":!0,"kingdee-form-item-message__error":!!l});return c?o.a.createElement("div",{className:d,style:n},o.a.createElement("label",{htmlFor:c.component?"".concat(c.props.name,"_").concat(c.props.key):"",className:h,style:a},"".concat(t)),o.a.createElement("div",{className:"kingdee-form-item-div",style:u},c.component?Object(r.cloneElement)(c.component,{id:"".concat(c.props.name,"_").concat(c.props.key),onChange:this.handleChange,style:u,checked:y,value:p?m:f,status:l?"error":""}):o.a.createElement("div",{className:"kingdee-form-item-text"},c),c&&c.props&&c.props.config&&c.props.config.hasIcon?c.props.config.hasIcon.icon:null,l?o.a.createElement("div",{className:g},l):null)):null}}])&&h(n.prototype,a),i&&h(n,i),t}();w.contextTypes={updateStatus:i.a.func};var x=w;n(19);function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(n,!0).forEach(function(t){M(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var D={},R=function(e,t){var n={};return Object.keys(t).forEach(function(r){var o=t[r].defaultValue?t[r].defaultValue:"";void 0!==e[r]&&(o=e[r].value),t[r].rules&&t[r].rules.length>0&&function(e,t,n,r,o){t.every(function(t){return t.require&&!e.trim()?(n=t.message?t.message:n,r[o]=n,!1):!(t.regExp&&!new regExp(t.regExp).test(e)&&(n=t.message?t.message:n,r[o]=n,1))})}(o,t[r].rules,"".concat(r," error"),n,r)}),n},I=function(e){function t(){var e,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(r=T(t).call(this))||"object"!==P(r)&&"function"!=typeof r?V(n):r).state={callbacks:[],errors:[]},e.defineField=e.defineField.bind(V(e)),e.submitForm=e.submitForm.bind(V(e)),e.handleChange=e.handleChange.bind(V(e)),e.updateStatus=e.updateStatus.bind(V(e)),e}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(t,o.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){var e=this.context.setForm;e&&e({defineField:this.defineField,submitForm:this.submitForm})}},{key:"updateStatus",value:function(e){var t=this.state.callbacks;"function"==typeof e&&(t.push(e),this.setState({callbacks:t}))}},{key:"getChildContext",value:function(){return{updateStatus:this.updateStatus}}},{key:"handleChange",value:function(e,t){var n=this.context.name;this.setState(M({},"".concat(t),Object.assign({value:e},C({},D["".concat(n)][t]))))}},{key:"setFields",value:function(e){var t=this.state.callbacks;e.isValue=!0,t.forEach(function(t){t(e)})}},{key:"setErrors",value:function(e){var t=this.state.callbacks;e.isMsg=!0,t.forEach(function(t){t(e)})}},{key:"defineField",value:function(e,t){var n=this,r=this.context.name;return function(o){return D["".concat(r)]||(D["".concat(r)]={}),D["".concat(r)]["".concat(e)]=C({},t),{component:o,props:{key:e,name:r,config:t,onChange:function(t){n.handleChange(t,e)},checked:t&&t.checked,defaultValue:t&&void 0!==t.defaultValue?t.defaultValue:"",value:""}}}}},{key:"submitForm",value:function(e){var t=this,n={},r=this.context.name,o={};r&&D[r]&&(D[r]&&Object.keys(D[r]).forEach(function(e){void 0!==t.state[e]?n[e]=t.state[e].value:n[e]=D[r][e]&&D[r][e]&&void 0!==D[r][e].defaultValue?D[r][e].defaultValue:""}),o=R(this.state,D["".concat(r)]),this.setErrors(o),delete o.isMsg);var a=Object.keys(o).map(function(e){return{index:e,error:o[e]}});0===a.length&&(a=null),e(a,n)}},{key:"render",value:function(){var e=this.props.children;return o.a.createElement("form",{className:"kingdee-form"},e)}}])&&F(n.prototype,r),a&&F(n,a),t}();M(I,"childContextTypes",{updateStatus:i.a.func}),M(I,"contextTypes",{setForm:i.a.func,name:i.a.string}),I.create=y,I.Item=x;t.default=I},,,,,function(e,t,n){"use strict";var r=n(18);function o(){}function a(){}a.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,a,i){if(i!==r){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:o};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){}])});